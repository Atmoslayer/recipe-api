# API сервис для поварской книги
Сервис содержит два API метода для внесения данных в БД и функцию для генерации шаблона, отображающего конкретные рецепты.
# Полное описание функционала
## Метод  `PUT` api/v1/add_product_to_recipe/<int: recipe_id>/
В качестве параметра принимает идентификатор рецепта, для которого будет добавлен продукт с указанным весом. 
Если в рецепте данный продукт уже есть, его вес меняется на указанный. Параметры идентификатора продукта и его веса
передаются в теле запроса следующим образом:
```json
{
    "product_id": 4,
    "weight": 150
}
```
## Метод  `PUT` api/v1/cook_recipe/<int: recipe_id>/
В качестве параметра принимает идентификатор рецепта, увеличивает на единицу количество продуктов,
входящих в состав рецепта. 
## Функция  show_recipes_without_product/<int: recipe_id>/
В качестве параметра принимает идентификатор продукта.
По данному адресу функция возвращает HTML-страницу с таблицей, где указаны идентификаторы и названия блюд,
в которых данный продукт отсутствует или его количество равно меньше 10 грамм. **Важно** в данном случае
идентификатор продукта не проходит проверку. Если указан несуществующий идентификатор, то продукта по нему нет,
значит нет ограничений на блюда, и на странице отобразятся все добавленные рецепты. 

# Как установить
Python 3 уже должен быть установлен. 
Возможно, вместо команды `python` здесь и в остальных инструкциях этого 
README придётся использовать `python3`. Зависит это от операционной системы и от того, 
установлен ли у вас Python старой второй версии.
В каталоге проекта создайте виртуальное окружение:
```sh
python -m venv venv
```
Активируйте его. На разных операционных системах это делается разными командами:
- Windows: `.\venv\Scripts\activate`
- MacOS/Linux: `source venv/bin/activate`
Установите зависимости в виртуальное окружение:
```sh
pip install -r requirements.txt
```
Создайте файл `.env` в каталоге `recipe-api` и определите в нем следующие переменные:
- При запуске на сервере определите переменную окружения `ALLOWED_HOSTS` и положите туда ip-адрес сервера;
- Определите переменную окружения `SECRET_KEY`;
- Определите переменную `DEBUG`;
## Пример заполненного файла `.env` 
```shell
SECRET_KEY=django-insecure-fdewqlljjfnvbt
DEBUG=True
ALLOWED_HOSTS=127.0.0.1
```
Запустите миграции следующей командой:
```sh
python manage.py migrate
```
Для пользования административной панелью создайте пользователя с помощью команды
```sh
python manage.py createsuperuser
```
После конфигурации БД можно переходить к запуску сервера.
Используйте команду:
```sh
python manage.py runserver
```
**Важно!** Обратите внимание, что данная команда используется только для запуска сайта dev-режиме, поэтому для его корректной работы 
[переменная окружения](#пример-заполненного-файла-env) `DEBUG` должна иметь значение `True`
Откройте сайт в браузере по адресу [http://127.0.0.1:8000/admin/](http://127.0.0.1:8000/admin/), 
если административная панель открывается, сервис работает.

